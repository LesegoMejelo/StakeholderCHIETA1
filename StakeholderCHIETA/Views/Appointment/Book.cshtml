@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make An Appointment</title>
    <link rel="stylesheet" href="Content/BookPage.css">

    <link rel="stylesheet" href="~/Content/AppointmentBooking.css" asp-append-version="true" />


</head>
<body>
    <div class="header">
        <img src="Logo.png" alt="Chieta Logo">
    </div>

    <div class="container">
        <h1>Make An Appointment</h1>

        <div class="form-group">
            <label for="advisor">Name of Advisor</label>
            <select id="advisor">
                <option value="">Name of Advisor</option>
                <option value="john">John Smith</option>
                <option value="sarah">Sarah Johnson</option>
                <option value="michael">Michael Brown</option>
            </select>
        </div>

        <div class="form-group">
            <label for="reason">Reason For Appointment:</label>
            <textarea id="reason" placeholder="Write your reason here..."></textarea>
        </div>

        <div class="date-time-wrapper">
            <div class="date-container">
                <label for="date">Select date</label>
                <input type="date" id="date">
            </div>

            <div class="time-container">
                <label for="time">Enter time</label>
                <input type="time" id="time">
            </div>
        </div>

        <button class="confirm-button" id="confirm-btn">Confirm Appointment</button>
    </div>

    <script>
        document.getElementById('confirm-btn').addEventListener('click', async function() {
            const advisor = document.getElementById('advisor').value;
            const reason = document.getElementById('reason').value;
            const date = document.getElementById('date').value;
            const time = document.getElementById('time').value;

            if (!advisor || !reason || !date || !time) {
                alert('Please fill in all fields');
                return;
            }
            try {
                const response = await fetch("/api/appointment", {
                    method: "POST",
                            headers: { "Content-Type": "application/x-www-form-urlencoded" },
                            body: new URLSearchParams({
                                  Advisor: advisor,
                                  Reason: reason,
                                  Date: date,
                                  Time: time
                            })
                    
                });

                const result = await response.json();
                console.log("Server response:", result);

                document.getElementById("confirmationMessage").style.display = "block";

                // Clear the form
                document.getElementById("advisor").value = "";
                document.getElementById("reason").value = "";
                document.getElementById("date").value = "";
                document.getElementById("time").value = "";

            } catch (error) {
                console.error("Submission failed:", error);
                alert("Something went wrong. Please try again.");
            }

            alert(`Appointment confirmed!\nAdvisor: ${advisor}\nReason: ${reason}\nDate: ${date}\nTime: ${time}`);
        });
    </script>
</body>
</html>
